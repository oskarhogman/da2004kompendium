<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2024-06-17" />

<title>Kapitel 8</title>

<script src="site_libs/header-attrs-2.27/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DA2004 Programmersteknik</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Förord</a>
</li>
<li>
  <a href="kapitel1.html">1: Kom igång med Python</a>
</li>
<li>
  <a href="kapitel2.html">2: Grunder i Python-programmering</a>
</li>
<li>
  <a href="kapitel3.html">3: Listor och iteration</a>
</li>
<li>
  <a href="kapitel4.html">4: Uppslagstabeller, filhantering och mer om loopar</a>
</li>
<li>
  <a href="kapitel5.html">5: Felhantering, särfall, listomfattning och felsökning</a>
</li>
<li>
  <a href="kapitel6.html">6: Sekvenser och generatorer</a>
</li>
<li>
  <a href="kapitel7.html">7: Moduler, bibliotek och programstruktur</a>
</li>
<li>
  <a href="kapitel8.html">8: Funktionell programmering</a>
</li>
<li>
  <a href="kapitel9.html">9: Objektorientering 1: Klasser</a>
</li>
<li>
  <a href="kapitel10.html">10: Objektorientering 2: Arv</a>
</li>
<li>
  <a href="kapitel11.html">11: Objektorientering 3: Mer om arv</a>
</li>
<li>
  <a href="kapitel12.html">12: Defensiv programmering</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Kapitel 8</h1>
<h4 class="date">2024-06-17</h4>

</div>


<script src="https://cdn.datacamp.com/datacamp-light-latest.min.js"></script>
<p>I detta kapitel ska vi titta på <em>funktionell</em> programmering i
Python. Detta sätt att programmera på bygger på att man anropar, sätter
ihop och modifiera funktioner. På detta sätt kan vi göra mycket av vad
vi redan sett i de andra kapitlen, men endast genom att hantera
funktioner. T.ex. kan vi byta ut loopar mot <em>rekursiva</em>
funktioner, dvs funktioner som anropar sig själva.</p>
<div id="rekursion" class="section level1">
<h1>Rekursion</h1>
<p>Funktioner kan anropa sig själva och då kallas de <em>rekursiva</em>.
Det finns många exempel på detta i matematiken, men även inom
programmering kan rekursion vara användbart då det ofta leder till
eleganta och korta program. Det kan dock vara svårt att börja “tänka
rekursivt” och se hur man kan lösa olika problem med hjälp av rekursion.
Ett bra sätt att lära sig använda rekursion är att ta program man
skrivit med hjälp av loopar och göra om dem med rekursion istället.</p>
<div id="fakultet" class="section level2">
<h2>Fakultet</h2>
<p>Ett klassiskt exempel på en rekursiv funktion från matematiken är
fakultet. Detta skrivs <span class="math inline">\(n!\)</span> och
beräknas genom att man tar produkten av alla tal från <span
class="math inline">\(1\)</span> till <span
class="math inline">\(n\)</span>. Exempel: <span class="math display">\[
5! = 5 * 4 * 3 * 2 * 1 = 120
\]</span></p>
<p>Detta kan beskrivas rekursivt, dvs i termer av sig själv, genom:
<span class="math display">\[
\begin{aligned}
5! &amp;= 5 * 4! \\
   &amp;= 5 * 4 * 3! \\
   &amp;= 5 * 4 * 3 * 2! \\
   &amp;= 5 * 4 * 3 * 2 * 1! \\
   &amp;= 5 * 4 * 3 * 2 * 1 * 0! \\
   &amp;= 5 * 4 * 3 * 2 * 1 * 1 \\
   &amp;= 120 \\
\end{aligned}
\]</span></p>
<p>Detta är en rekursiv beräkning med <em>basfall</em> <span
class="math inline">\(0! = 1\)</span>. En matematiker skriver detta som:
<span class="math display">\[
n! =
\begin{cases}
1 &amp; \text{om n är 0} \\
n * (n - 1)! &amp; \text{annars}
\end{cases}
\]</span></p>
<p>I Python skriver vi detta genom:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmYWMobik6XG4gICBpZiBuID09IDA6XG4gICAgICByZXR1cm4gMVxuICAgZWxzZTpcbiAgICAgIHJldHVybiBuICogZmFjKG4gLSAxKSJ9
</div>
<p>Fallet <code class="python">n == 0</code> kallas <em>basfall</em>.
Det är här som rekursionen stannar och börjar nystas upp. Det andra
fallet kallas <em>rekursivt steg</em> och går ut på att göra ett
“enklare” anrop, där problemet i någon mening har gjorts mindre.</p>
Denna funktion anropas precis på samma sätt som vanligt:
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6InByaW50KGZhYyg1KSkifQ==
</div>
<pre class="python"><code>120</code></pre>
</div>
<div id="fibonacci-talen" class="section level2">
<h2>Fibonacci-talen</h2>
<p>Varje kurs som tar upp rekursion måste ha med Fibonacci-talen som
exempel. Detta är en talserie som ser ut på följande sätt: <span
class="math display">\[
0, 1, 1, 2, 3, 5, 8, 13, 21, 34, ...
\]</span></p>
<p>Det <em>n</em>:te Fibonacci-talet, <em>F</em>(<em>n</em>), är summan
av de två tidigare Fibonacci-talen. Denna sekvens har två basfall, <span
class="math inline">\(F(0) = 0\)</span> och <span
class="math inline">\(F(1) =
1\)</span>. Därför kan vi skriva <span class="math display">\[
F(n) =
\begin{cases}
0 &amp; \text{om n är 0} \\
1 &amp; \text{om n är 1} \\
F(n-1) + F(n-2) &amp; \text{annars}
\end{cases}
\]</span></p>
<p>Detta är tydligt en rekursiv definition och vi kan implementera den
genom:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmaWIobik6XG4gICAgaWYgbiA9PSAwOlxuICAgICAgICByZXR1cm4gMFxuICAgIGlmIG4gPT0gMTpcbiAgICAgICAgcmV0dXJuIDFcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gZmliKG4tMSkgKyBmaWIobi0yKVxuXG5mb3IgaSBpbiByYW5nZSgxMCk6XG4gICAgcHJpbnQoZmliKGkpKSJ9
</div>
<pre class="python"><code>0
1
1
2
3
5
8
13
21
34</code></pre>
<p>Du kan jämföra denna implementation av en funktion som beräknar
Fibonacci-tal med den i i <a href="#kap6:uppgifter">Kapitel 6</a>, som
använder sig av en generator.</p>
</div>
<div id="största-gemensamma-delare-rekursivt" class="section level2">
<h2>Största gemensamma delare, rekursivt</h2>
<p>Minns <a href="#kap3:GCD">Euklides algoritm</a> för största
gemensamma delare (GCD, för “Greatest Common Divisor”) för två tal
<code>a</code> och <code>b</code> från :</p>
<ul>
<li>Antag <code>a &gt;= b</code>,</li>
<li>låt <code>r</code> vara resten av heltalsdivision
<code>a // b</code>,</li>
<li>om r == 0, då är <code>GCD(a, b) = b</code>,</li>
<li>annars kan man använda att är
<code>GCD(a,b) = GCD(b, r)</code>.</li>
</ul>
<p>En enkel iterativ implementation:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBnY2QoYSxiKTpcbiAgICBpZiBiID4gYTpcbiAgICAgICAgcHJpbnQoXCJhIG11c3QgYmUgYmlnZ2VyIHRoYW4gYiBpbiBnY2QoYSxiKVwiKVxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgciA9IGEgJSBiXG4gICAgd2hpbGUgciAhPSAwOlxuICAgICAgICBhID0gYlxuICAgICAgICBiID0gclxuICAgICAgICByID0gYSAlIGJcbiAgICByZXR1cm4gYlxuXG5wcmludChcIkdDRDogXCIgKyBzdHIoZ2NkKDE1LDEyKSkgKyBcIlxcblwiKVxucHJpbnQoXCJHQ0Q6IFwiICsgc3RyKGdjZCgxMiwxNSkpKSJ9
</div>
<pre class="python"><code>GCD: 3

a must be bigger than b in gcd(a,b)
GCD: None</code></pre>
<p>Det är inte helt lätt att se hur denna implementation följer av
algoritmen. En rekursiv implementation är mycket närmare:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBnY2QoYSxiKTpcbiAgICBpZiBiID4gYTpcbiAgICAgICAgcHJpbnQoXCJhIG11c3QgYmUgYmlnZ2VyIHRoYW4gYiBpbiBnY2QoYSxiKVwiKVxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgciA9IGEgJSBiXG4gICAgaWYgciA9PSAwOlxuICAgICAgICByZXR1cm4gYlxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiBnY2QoYixyKVxuXG5wcmludChcIkdDRDogXCIgKyBzdHIoZ2NkKDE1LDEyKSkgKyBcIlxcblwiKVxucHJpbnQoXCJHQ0Q6IFwiICsgc3RyKGdjZCgxMiwxNSkpKSJ9
</div>
<pre class="python"><code>GCD: 3

a must be bigger than b in gcd(a,b)
GCD: None</code></pre>
</div>
<div id="loopar-genom-rekursion" class="section level2">
<h2>Loopar genom rekursion</h2>
<p>Ovan såg vi ett exempel på ett program vi redan skrivit med loopar
som kan ersättas med rekursion. Detta kan alltid göras, både för <code
class="python">for</code> och <code class="python">while</code>
loopar.</p>
I <code>GCD</code>-exemplet var det en <code class="python">while</code>
loop som byttes ut mot en rekursiv definition. Nedan är en enkel
funktion som använder en <code class="python">for</code> loop för att
beräkna summan av alla tal upp till och med <code>x</code>:
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmKHgpOlxuICAgIHMgPSAwXG5cbiAgICBmb3IgaSBpbiByYW5nZSh4KzEpOlxuICAgICAgICBzICs9IGk7XG5cbiAgICByZXR1cm4gcyJ9
</div>
Detta kan skrivas rekursivt på följande sätt:
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmX3JlYyh4KTpcbiAgICBpZiB4ID09IDA6XG4gICAgICAgIHJldHVybiAwXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIHggKyBmX3JlYyh4LTEpIn0=
</div>
<p>Tanken är här att vi anropar <code>f_rec</code> rekursivt med mindre
och mindre tal tills vi kommer till basfallet när <code>x</code> är
<code>0</code>. Detta representerar loopen i <code>f</code>. Vi kan
testa så att funktionerna returnerar samma resultat genom:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImZvciBpIGluIHJhbmdlKDUpOlxuICAgIHByaW50KFwiZihcIiArIHN0cihpKSArIFwiKSA9IFwiICsgc3RyKGYoaSkpKVxuICAgIHByaW50KFwiZl9yZWMoXCIgKyBzdHIoaSkgKyBcIikgPSBcIiArIHN0cihmX3JlYyhpKSkpIn0=
</div>
<pre class="python"><code>f(0) = 0
f_rec(0) = 0
f(1) = 1
f_rec(1) = 1
f(2) = 3
f_rec(2) = 3
f(3) = 6
f_rec(3) = 6
f(4) = 10
f_rec(4) = 10</code></pre>
</div>
<div id="rekursion-över-listor" class="section level2">
<h2>Rekursion över listor</h2>
<p>Vi har sett hur man kan skriva rekursiva funktioner över tal. Detta
går även att göra över andra datatyper. Det generella tankesättet är att
man måste ha ett eller fler basfall och att de rekursiva fallen
reducerar indata på något sätt så att man till slut kommer till ett
basfall. För tal använde vi ofta <code>0</code> som basfall och minskade
indata när vi gjorde rekursiva anrop. Vill man skriva rekursiva
funktioner över listor använder man istället ofta <code>[]</code> som
basfall och tar bort ett element från början eller slutet i det
rekursiva anropet.</p>
<p>Vi kan på detta sätt skriva vår egen <code>len</code> funktion
genom:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBsZW5ndGgoeHMpOlxuICAgICMgb2JzOiBsaXN0cyBiZWhhdmUgYXMgYm9vbGVhbiB2YWx1ZXMgKFtdIGlzIEZhbHNlKVxuICAgIGlmIHhzOlxuICAgICAgICB4cy5wb3AoKVxuICAgICAgICByZXR1cm4gKDEgKyBsZW5ndGgoeHMpKVxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiAwXG5cbnByaW50KGxlbmd0aChbMSwzNDEsMjMsMSwwLDJdKSkifQ==
</div>
<pre class="python"><code>6</code></pre>
<p><strong>Varning:</strong> den här funktionen ändrar <code>xs</code>!
Testa följande:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6Im15bGlzdCA9IFsxLDIsMyw2LDddXG5cbnByaW50KG15bGlzdClcblxucHJpbnQobGVuZ3RoKG15bGlzdCkpXG5cbnByaW50KG15bGlzdCkifQ==
</div>
<pre class="python"><code>[1, 2, 3, 6, 7]
5
[]</code></pre>
<p>Då <code>length</code> har anropat <code>pop</code> upprepade gånger
har <code>mylist</code> blivit tom! För att det inte ska bli så här
måste vi anropa <code>length</code> med en <em>kopia</em> av
<code>mylist</code>:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6Im15bGlzdCA9IFsxLDIsMyw2LDddXG5cbnByaW50KG15bGlzdClcblxucHJpbnQobGVuZ3RoKG15bGlzdC5jb3B5KCkpKVxuXG5wcmludChteWxpc3QpIn0=
</div>
<pre class="python"><code>[1, 2, 3, 6, 7]
5
[1, 2, 3, 6, 7]</code></pre>
<p>Summan av alla element i en lista kan beräknas på följande sätt</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBzdW0oeHMpOlxuICAgIGlmIHhzOlxuICAgICAgICB4ID0geHMucG9wKCkgICMgcG9wIHJldHVybnMgdGhlIGVsZW1lbnRcbiAgICAgICAgcmV0dXJuICh4ICsgc3VtKHhzKSlcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gMFxuXG5wcmludChzdW0oWzEsMyw1LC0xLDAsMl0pKSJ9
</div>
<pre class="python"><code>10</code></pre>
<p>och produkten på detta sätt:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBwcm9kKHhzKTpcbiAgICBpZiB4czpcbiAgICAgICAgeCA9IHhzLnBvcCgpICAjIHBvcCByZXR1cm5zIHRoZSBlbGVtZW50XG4gICAgICAgIHJldHVybiAoeCAqIHByb2QoeHMpKVxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiAxXG5cbnByaW50KHByb2QoWzEsMyw1LC0xLDJdKSkifQ==
</div>
<pre class="python"><code>-30</code></pre>
<div id="sortering-av-listor" class="section level3">
<h3>Sortering av listor</h3>
<p>En snabb och bra sorteringsalgoritm är <em>quicksort</em>. Den
fungerar på följande sätt:</p>
<ol style="list-style-type: decimal">
<li><p>Välj ett element i listan (“pivotelementet”).</p></li>
<li><p>Dela upp listan i två dellistor: en med alla element som är
mindre än pivotelementet och en med alla element som är större än
pivotelementet.</p></li>
<li><p>Sortera dellistorna genom rekursion. Basfallet är tomma listan
vilken redan är sorterad.</p></li>
<li><p>Sätt ihop listorna med pivotelementet i mitten.</p></li>
</ol>
<p>För att implementera detta i Python skriver vi först två
hjälpfunktioner för att hämta ut alla element som är mindre och större
än ett givet element:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6IiMgQWxsIGVsZW1lbnRzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB2IGluIHhzXG5kZWYgc21hbGxlcmVxKHhzLHYpOlxuICAgIHJlcyA9IFtdXG4gICAgd2hpbGUgeHM6XG4gICAgICAgIHggPSB4cy5wb3AoKVxuICAgICAgICBpZiB4IDw9IHY6XG4gICAgICAgICAgICByZXMuYXBwZW5kKHgpXG4gICAgcmV0dXJuIHJlc1xuXG4jIEFsbCBlbGVtZW50cyBncmVhdGVyIHRoYW4gdiBpbiB4c1xuZGVmIGdyZWF0ZXIoeHMsdik6XG4gICAgcmVzID0gW11cbiAgICB3aGlsZSB4czpcbiAgICAgICAgeCA9IHhzLnBvcCgpXG4gICAgICAgIGlmIHggPiB2OlxuICAgICAgICAgICAgcmVzLmFwcGVuZCh4KVxuICAgIHJldHVybiByZXNcblxucHJpbnQoc21hbGxlcmVxKFsyLDQsNSw2LDcsOF0sNSkpXG5wcmludChncmVhdGVyKFsyLDQsNSw2LDcsOF0sNSkpIn0=
</div>
<pre class="python"><code>[5, 4, 2]
[8, 7, 6]</code></pre>
<p>Vi kan sedan implementera <code>quicksort</code> på följande
sätt:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBxdWlja3NvcnQoeHMpOlxuICAgIGlmIHhzID09IFtdOlxuICAgICAgICByZXR1cm4geHNcblxuICAgIHAgPSB4cy5wb3AoKVxuICAgIHMgPSBxdWlja3NvcnQoc21hbGxlcmVxKHhzLmNvcHkoKSxwKSlcbiAgICBnID0gcXVpY2tzb3J0KGdyZWF0ZXIoeHMuY29weSgpLHApKVxuICAgIHJldHVybiAocyArIFtwXSArIGcpXG5cbnByaW50KHF1aWNrc29ydChbOCwzLDMsMiw0LDUsOCw1LDYsNyw4XSkpIn0=
</div>
<pre class="python"><code>[2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 8]</code></pre>
<p>Vi kan även skriva <code>smallereq</code> och <code>greater</code>
direkt med listomfattningar och få en ännu kortare implementation:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBxdWlja3NvcnQoeHMpOlxuICAgIGlmIHhzID09IFtdOlxuICAgICAgICByZXR1cm4geHNcbiAgICBlbHNlOlxuICAgICAgICBwID0geHMucG9wKClcbiAgICAgICAgcyA9IHF1aWNrc29ydChbIHggZm9yIHggaW4geHMgaWYgeCA8PSBwIF0pXG4gICAgICAgIGcgPSBxdWlja3NvcnQoWyB4IGZvciB4IGluIHhzIGlmIHggPiBwIF0pXG4gICAgICAgIHJldHVybiAocyArIFtwXSArIGcpXG5cbnByaW50KHF1aWNrc29ydChbOCwzLDMsMiw0LDUsOCw1LDYsNyw4XSkpIn0=
</div>
<pre class="python"><code>[2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 8]</code></pre>
</div>
</div>
<div id="effektiv-rekursion" class="section level2">
<h2>Effektiv rekursion</h2>
<p>En fara med att skriva rekursiva funktioner är att de kan bli väldigt
långsamma jämfört med iterativ kod skriven med loopar. Exempelvis om vi
utvidgar definitionen av <code>fib(5)</code> för hand så ser vi
följande:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImZpYig1KSA9IGZpYig0KSArIGZpYigzKVxuICAgICAgID0gKGZpYigzKSArIGZpYigyKSkgKyAoZmliKDIpICsgZmliKDEpKVxuICAgICAgID0gKChmaWIoMikgKyBmaWIoMSkpICsgKGZpYigxKSArIGZpYigwKSkpICsgKChmaWIoMSkgKyBmaWIoMCkpICsgZmliKDEpKVxuICAgICAgID0gKCgoZmliKDEpICsgZmliKDApKSArIGZpYigxKSkgKyAoZmliKDEpICsgZmliKDApKSlcbiAgICAgICAgICsgKChmaWIoMSkgKyBmaWIoMCkpICsgZmliKDEpKVxuICAgICAgID0gKCgoMSArIDApICsgMSkgKyAoMSArIDApKSArICgoMSArIDApICsgMSlcbiAgICAgICA9IDUifQ==
</div>
<p>Problemet är att vi beräknar samma tal många gånger, så vi får
väldigt långsam kod. Testar man följande så ser man att det tar längre
och längre tid att skriva ut utdata:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImZvciB4IGluIHJhbmdlKDM1KTpcbiAgICBwcmludChmaWIoeCkpIn0=
</div>
<pre class="python"><code>0
1
1
2
3
5
8
13
21
34
55
89
144
233
377
610
987
1597
2584
4181
6765
10946
17711
28657
46368
75025
121393
196418
317811
514229
832040
1346269
2178309
3524578
5702887</code></pre>
<p>Det sista talet här tar flera sekunder att skriva ut.</p>
<p>Detta kan lösas genom att skriva en smartare version av
<code>fib</code>:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmaWJfcmVjKG4sIGE9MCwgYj0xKTpcbiAgICBpZiBuID09IDA6XG4gICAgICAgIHJldHVybiBhXG4gICAgZWxpZiBuID09IDE6XG4gICAgICAgIHJldHVybiBiXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIGZpYl9yZWMobi0xLCBiLCBhK2IpIn0=
</div>
<p>Tanken här är att <code>n</code> är en räknare för indexet på det
Fibonacci tal vi håller på att beräkna, <code>a</code> är värdet 2 steg
tidigare i sekvensen och <code>b</code> är värdet 1 steg tidigare. På
detta sätt behöver vi bara ett rekursivt anrop och koden blir mycket
snabbare. Exempelvis skrivs följande ut på nolltid:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6InByaW50KGZpYl9yZWMoMTAwKSkifQ==
</div>
<pre class="python"><code>354224848179261915075</code></pre>
<p>Denna funktion kommer fungera på följande sätt för att räkna ut <code
class="python">fib_rec(5)</code> (dvs. <code
class="python">fib_rec(5,0,1)</code>):</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImZpYl9yZWMoNSkgPSBmaWJfcmVjKDUsMCwxKVxuICAgICAgICAgICA9IGZpYl9yZWMoNCwxLDEpXG4gICAgICAgICAgID0gZmliX3JlYygzLDEsMilcbiAgICAgICAgICAgPSBmaWJfcmVjKDIsMiwzKVxuICAgICAgICAgICA9IGZpYl9yZWMoMSwzLDUpXG4gICAgICAgICAgID0gNSJ9
</div>
<p>På detta sätt har vi alltså undvikit den kombinatoriska explosionen
och <code>fib_rec</code> är väldigt mycket snabbare än
<code>fib</code>.</p>
<p>Vill man prova med större tal går det också:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6InByaW50KGZpYl9yZWMoMTAwMCkpIn0=
</div>
<pre class="python"><code>434665576869374564356885276750406258025646605173717804024817290895365554179490518904
038798400792551692959225930803226347752096896232398733224711616429964409065331879382
98969649928516003704476137795166849228875</code></pre>
<p>Vill man prova med väldigt stora tal måste man göra följande då
Python har en inbyggd gräns för hur många rekursiva anrop som
tillåts:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImltcG9ydCBzeXNcblxuc3lzLnNldHJlY3Vyc2lvbmxpbWl0KDEwMDAwMClcblxucHJpbnQoZmliX3JlYygxMDAwMCkpIn0=
</div>
<p>Beräkningen av detta väldigt stora tal går på nolltid, även fast det
består av över <code>2000</code> siffror. Så rekursiva funktioner kan
vara väldigt snabba om man skriver dem på rätt sätt.</p>
<p>Python är dock inte alltid jättesnabbt när det kommer till att
exekvera funktioner skrivna med rekursion. Så det är oftast bättre att
skriva en funktion med hjälp av <code>for</code> eller
<code>while</code> om man behöver snabb kod.</p>
</div>
<div id="diskussion-om-rekursion" class="section level2">
<h2>Diskussion om rekursion</h2>
<ul>
<li>Princip: bryt upp i mindre instanser, lös dessa.</li>
<li>Rekursion är att “ta hjälp av en (osynlig) kompis”</li>
<li>Rekursion är en effektiv algoritmisk teknik
<ul>
<li>Rekursion är dock inte Pythons starkaste sida. Många
programmeringsspråk konverterar internt (utan att programmeraren behöver
göra något) viss rekursiv kod till while-loopar. Det är möjligt när det
rekursiva anropet är sist i funktionen, vilket kallas “svansrekursion”,
och ger snabbare och mer minnessnål exekvering.</li>
</ul></li>
<li>Ofta användbar teknik i datastrukturer (t.ex. sökträd).</li>
</ul>
<p>Principen för ett funktionsanrop är som följer.</p>
<ul>
<li>När ett funktionsanrop görs läggs anropsparametrarna på den
minnesarea som kallas <em>stacken</em>.</li>
<li>En funktion börjar exekvera genom att plocka upp anropsparametrarna
från stacken till lokala variabler.</li>
<li>När <code class="python">return</code> exekveras så läggs
returvärdet på stacken.</li>
<li>Den kod som gjort ett funktionsanrop kan alltså hämta resultatet på
stacken när funktionen är klar.</li>
</ul>
<p>Det är denna princip som gör att rekursion i praktiken är enkel i
datorer.</p>
</div>
</div>
<div id="anonyma-och-högre-ordningens-funktioner"
class="section level1">
<h1>Anonyma och högre ordningens funktioner</h1>
<p>När vi har pratat variabler och värden har vi hittills framförallt
pratat om heltal, flyttal, strängar, listor, med mera. Det finns goda
skäl att lägga <em>funktioner</em> till uppräkningen av värden att
arbeta med, vilket handlar om möjligheten att skapa nya funktioner när
man behöver dem, skicka funktioner som argument, returnera funktioner,
och kunna tillämpa operatorer på funktioner. När ett programmeringsspråk
har de möjligheterna säger man att funktioner behandlas som <em>first
class citizens</em> (eller <em>first class objects</em> eller <em>first
class functions</em>).</p>
<p>Gamla språk i samma tradition som Python, så kallade <em>imperativa
språk</em>, var dåliga på att hantera funktioner, men i Lisp och andra
språk för <em>funktionell programmering</em> så har funktioner varit
<em>first class citizens</em> sedan 50-talet. Idag kan man säga att det
är en vanlig finess som många språk stödjer, däribland Python.</p>
<div id="anonyma-funktioner" class="section level2">
<h2>Anonyma funktioner</h2>
<p>Begreppet <em>anonyma funktioner</em> med hjälp av
<em>lambda-uttryck</em> finns i många språk idag. Man säger att
funktionerna är <em>anonyma</em> eftersom man inte ger dem ett namn,
utan bara skapar dem. Tag kodsnutten</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRvdWJsZSA9IGxhbWJkYSB4OiAyICogeFxuXG5wcmludChkb3VibGUoMykpIn0=
</div>
<pre class="python"><code>6</code></pre>
<p>Definitionen <code>double</code> är en funktion som tar ett argument,
<code>x</code>, och beräknar <code>2 * x</code>. Vi kan även få en
funktion av två argument genom:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImYgPSBsYW1iZGEgeCwgeTogMiAqIHggKyB5XG5cbnByaW50KGYoMyw0KSkifQ==
</div>
<pre class="python"><code>10</code></pre>
<p>Detta är ekvivalent med följande definition:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmKHgseSk6XG4gICByZXR1cm4gMiAqIHggKyB5In0=
</div>
<p>Man ska dock inte se lambda-uttryck som bara ett alternativ till
vanliga funktionsdefinitioner; de är snarare komplement till <code
class="python">def</code> och dess främsta användningsområde är för att
skapa tillfälliga små funktioner att använda tillsammans med <em>högre
ordningens funktioner</em>.</p>
<p>Anledningen att dessa introduceras med <code
class="python">lambda</code> är från den så kallade <span
class="math inline">\(\lambda\)</span>-kalkylen. Detta är en
beräkningsmodell uppfunnen av logikern Alonzo Church på 1930-talet (<a
href="https://en.wikipedia.org/wiki/Lambda_calculus"
class="uri">https://en.wikipedia.org/wiki/Lambda_calculus</a>). I denna
modell är allting uppbyggt från funktioner och variabler (så t.ex.
heltal representeras även de som funktioner), och man kan på detta sätt
representera alla beräkningar som kan göras med en <a
href="https://en.wikipedia.org/wiki/Turing_machine">Turingmaskin</a>
genom att bara använda lambda-uttryck.</p>
<p><em>Anmärkning</em>: En Turingmaskin är en matematisk
beräkningsmodell/koncept, som avänds för att förstå algoritmer och deras
begränsningar. Datorer som används idag är inte uppbyggda enligt
Turingmaskin-konceptet, men termen <a
href="https://en.wikipedia.org/wiki/Turing_completeness">__Turingkomplett_</a>
om en formell definition av regler, som t.ex. utgör ett
programmeringsspråk, är sådan att vilken Turingmaskin som helst kan
representeras med instruktioner enligt dessa regler.</p>
</div>
<div id="högre-ordningens-funktioner" class="section level2">
<h2>Högre ordningens funktioner</h2>
<p>En <em>högre ordningens funktion</em> tar en funktion som argument
och är ett djupare begrepp än det kanske först låter som. Poängen med
högre ordningens funktioner är att de kan vara ett sätt att generalisera
funktionalitet. Genom att identifiera vanliga mönster för beräkningar
och låta dessa implementeras med högre ordningens funktioner kan man
förenkla, korta ner, och kanske även snabba upp sin kod. Några exempel
på beräkningar man kan vilja göra är:</p>
<ol style="list-style-type: decimal">
<li><p>Ta en lista med tal och returnera en lista med dess
kvadrater.</p></li>
<li><p>Ta en lista med icketomma listor och returnera en lista med det
första elementet från varje lista.</p></li>
<li><p>Ta en lista med strängar och räkna ut deras längder.</p></li>
</ol>
<p>Dessa tre beräkningar har gemensamt att man ska utföra något på varje
element i en lista. Det är inte svårt att skriva en <code
class="python">for</code>-loop för detta, men funktionen
<code>map</code> är mer kompakt, känns igen av andra programmerare, och
är redan implementerad (se också i <a href="#kap6:uppgifter">kapitel
6</a>). Det första argumentet till <code>map</code> är en funktion som
sedan appliceras på alla element i listan. Denna funktion kan antingen
ges genom <code class="pyhon">lambda</code> eller genom namn på vilken
Pythonfunktion som helst.</p>
<p>Ovan uppgifter kan därför lätt lösas med några små enkla uttryck:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6IiMgMVxucHJpbnQobGlzdChtYXAobGFtYmRhIHg6IHgqKjIsIFsxLDIsMyw0XSkpKVxuXG4jIDJcbnByaW50KGxpc3QobWFwKGxhbWJkYSB0OiB0WzBdLCBbWzEsMV0sIFswLDIsMV0sIFszLDEsNTMsMl1dKSkpXG5cbiMgM1xucHJpbnQobGlzdChtYXAobGVuLCBbXCJoZWpcIixcImhvcHBcIl0pKSkifQ==
</div>
<pre class="python"><code>[1, 4, 9, 16]
[1, 0, 3]
[3, 4]</code></pre>
<p><strong>Obs:</strong> <code>map</code> returnerar en generator, så vi
måste lägga in <code>list</code> för att få ut en lista.</p>
<div id="inte-bara-för-listor" class="section level3">
<h3>Inte bara för listor</h3>
<p>Observera också att <code>map</code> och liknande funktioner inte är
låsta till listor, utan kan tillämpas på allt som i Python är definierat
som <em>itererbart</em>. Det inkluderar till exempel strängar, tupler
och uppslagstabeller, men kan också definieras av programmeraren
själv.</p>
<p>För att beräkna längden på varje rad i filen <code>people.txt</code>
med innehåll:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6IkFuZGVyc1xuQ2hyaXN0aWFuXG5LcmlzdG9mZmVyXG5MYXJzIn0=
</div>
<p>kan vi köra:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6InByaW50KGxpc3QobWFwKGxlbiwgb3BlbigncGVvcGxlLnR4dCcpKSkpIn0=
</div>
<pre class="python"><code>[7, 10, 11, 5]</code></pre>
<p>Notera att newline tecknet <code>\n</code> räknas med och är av längd
1.</p>
</div>
<div id="högre-ordningens-funktion-filter" class="section level3">
<h3>Högre ordningens funktion: <code>filter</code></h3>
<p>En annan typ av funktionalitet som vi ofta vill använda är att välja
ut element som uppfyller något kriterium. Till det finns funktionen
<code>filter</code>. Den tar ett predikat, dvs en funktion som
returnerar sant eller falskt, och en itererbar datastruktur och
returnerar en generator (som du kan iterera över eller plocka fram som
en lista med <code>list</code>) med de element som predikatet är sant
för (<code class="python">True</code> eller motsvarande, tex icke-noll).
Exempel:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6InByaW50KGxpc3QoZmlsdGVyKGxhbWJkYSB4OiB4ICUgMiwgcmFuZ2UoMTApKSkpXG5cbnByaW50KGxpc3QoZmlsdGVyKGxhbWJkYSB4OiB4LCBbWzFdLCBbMiwzXSwgW10sIFtdLCBbNCw1LDZdXSkpKSJ9
</div>
<pre class="python"><code>[1, 3, 5, 7, 9]
[[1], [2, 3], [4, 5, 6]]</code></pre>
</div>
</div>
<div id="egna-högre-ordningens-funktioner" class="section level2">
<h2>Egna högre ordningens funktioner</h2>
<p>Funktionerna <code>map</code> och <code>filter</code> har ingen
särställning i Python, de är helt enkelt bra verktyg som många finner
praktiska att använda. Det är inte så svårt att skriva dessa funktioner
själv. Däremot kan det ju vara så att du hittar egna beräkningsbehov som
kan generaliseras.</p>
<p>Till exempel kan man beräkna summan och produkten av elementen i två
listor med hjälp av slicing på följande sätt:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBzdW1fcmVjKHhzKTpcbiAgICBpZiB4cyA9PSBbXTpcbiAgICAgICAgcmV0dXJuIDBcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gKHhzWzBdICsgc3VtX3JlYyh4c1sxOl0pKVxuXG5kZWYgcHJvZF9yZWMoeHMpOlxuICAgIGlmIHhzID09IFtdOlxuICAgICAgICByZXR1cm4gMVxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiAoeHNbMF0gKiBwcm9kX3JlYyh4c1sxOl0pKVxuXG5wcmludChzdW1fcmVjKFsxLDIsMyw0XSkpXG5wcmludChwcm9kX3JlYyhbMSwyLDMsNF0pKSJ9
</div>
<pre class="python"><code>10
24</code></pre>
<p>Den enda skillnaden mellan dessa är att en använder <code>+</code>
och <code>0</code>, och den andra <code>*</code> och <code>1</code>. Vi
kan alltså generalisera dessa till en funktion som tar in en funktion
<code>f</code> och ett element <code>x</code> :</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImRlZiBmb2xkcih4cyxmLHgpOlxuICAgIGlmIHhzID09IFtdOlxuICAgICAgICByZXR1cm4geFxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiBmKHhzWzBdLGZvbGRyKHhzWzE6XSxmLHgpKVxuXG5zdW0gPSBsYW1iZGEgeHM6IGZvbGRyKHhzLGxhbWJkYSB4LHk6IHggKyB5LDApXG5wcm9kID0gbGFtYmRhIHhzOiBmb2xkcih4cyxsYW1iZGEgeCx5OiB4ICogeSwxKVxuXG5wcmludChzdW0oWzEsMiwzLDRdKSlcbnByaW50KHByb2QoWzEsMiwzLDRdKSkifQ==
</div>
<pre class="python"><code>10
24</code></pre>
<p>Vi kan nu även lätt skriva en funktion som använder exponentiering
som operation:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImV4cHMgPSBsYW1iZGEgeHM6IGZvbGRyKHhzLGxhbWJkYSB4LHk6IHggKiogeSwxKVxuXG5wcmludChleHBzKFsyLDMsNF0pKSJ9
</div>
<pre class="python"><code>2417851639229258349412352</code></pre>
<p>Vi kan även skriva en funktion för att slå ihop listor av listor:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImpvaW4gPSBsYW1iZGEgeHM6IGZvbGRyKHhzLGxhbWJkYSB4LHk6IHggKyB5LFtdKVxuXG5wcmludChqb2luKFtbMV0sIFsyLDNdLCBbXSwgW10sIFs0LDUsNl1dKSkifQ==
</div>
<pre class="python"><code>[1, 2, 3, 4, 5, 6]</code></pre>
<p>Högre ordningens funktioner är alltså mycket smidiga för att skriva
väldigt generella funktioner och minimera duplikation av kod!</p>
<p><strong>Obs:</strong> det finns en funktion som heter
<code>reduce</code> som fungerar exakt som <code>foldr</code>, men med
argumenten i en annan ordning. Den ligger i biblioteket
<code>functools</code> och importeras på följande sätt:</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InB5dGhvbiIsInNhbXBsZSI6ImltcG9ydCBmdW5jdG9vbHNcblxucHJpbnQoZnVuY3Rvb2xzLnJlZHVjZShsYW1iZGEgcywgeDogcyt4LCBbMSwyLDNdLCAwKSkifQ==
</div>
<pre class="python"><code>6</code></pre>
<!-- ### TODO: Ska jag ha med detta? -->
<!-- Den viktigaste lärdomen är kanske att _funktioner kan ta funktioner -->
<!-- som parametrar_. Det är användbart till exempel om man vill skriva -->
<!-- funktioner som löser ekvationer numeriskt; varför skriva en funktion -->
<!-- som hittar rötter till en viss funktion, istället för exempelvis alla -->
<!-- differentierbara funktioner _f_:[_a, b_] -> _R_? -->
<!-- ```python -->
<!-- def newton_raphson(f, f_prime, x, precision): -->
<!--     ''' -->
<!--     Use Newton-Raphson's method for finding an x such that -->
<!--     |x - x0| < precision, where x0 is the true root of f. -->
<!--     f_prime is a function encoding the derivative of f. -->
<!--     x is the starting value. -->
<!--     Returns x, the root approximation. -->
<!--     ''' -->
<!--     ready = False -->
<!--     while not ready: -->
<!--         x_next = x - f(x)/f_prime(x)      # Den centrala kodraden som ska upprepas -->
<!--         ready = abs(x-x_next) < precision # Test av stoppvillkoret -->
<!--         x = x_next                        # Förberedelse inför nästa iteration -->
<!--     return x_next -->
<!-- ``` -->
</div>
</div>
<div id="uppgifter" class="section level1">
<h1>Uppgifter</h1>
<ol style="list-style-type: decimal">
<li><p>Skriv en rekursiv funktion <code>rec_prod_m(n,m)</code> som tar
två tal <code>n</code> och <code>m</code> och beräknar
<code>n * (n-m) * (n-2m) * ...</code> tills <code>n-km</code> har blivit
negativt.</p>
<p><em>Tips</em>: Funktionen kan skrivas genom att modifiera funktionen
<code>fac</code> något.</p></li>
</ol>
<!-- 2.  Skriv om funktionerna `lengths(xs)`, `sum(xs)` och `prod(xs)` ovan så att listan `xs` inte
    ändras efter vi har kallat på funktionerna. **Tips** Använd list slicing. -->
<ol start="2" style="list-style-type: decimal">
<li><p>Vad händer om vi ändrar till <code class="python">return 0</code>
i basfallet för <code>prod</code>? Varför?</p></li>
<li><p>Deklarera fem funktioner <code>f1,...,f5</code> med hjälp av
<code class="python">lambda</code> som utför addition, subtraktion,
multiplikation, division, och exponentiering. Till exempel ska
<code>f1(4,7)</code> returnera <code>11</code>. Använd dessa funktioner
för att skriva uttrycken</p>
<pre class="python"><code>(6*(2+3)/5)**2
(10 - 2**3)*5</code></pre></li>
<li><p>Använd <code>map</code> och <code class="python">lambda</code>
för att skriva funktion <code>get_evens(xs)</code> som tar en lista med
tal <code>xs</code> och konverterar jämna tal till <code
class="python">True</code> och udda tal till <code
class="python">False</code>.</p></li>
<li><p>Studera koden nedan. Hur många anrop till <code>f</code> görs
totalt om vi anropar <code>f</code> med <code>3</code>? Hur många blir
det för <code>4</code>? Varför?</p>
<pre class="python"><code>def f(n):
    if n &lt;= 1:
        return 1
    else:
        return f(n-1) + f(n-2) + f(n-3)</code></pre></li>
<li><p>Collatz-sekvensen med start i <span
class="math inline">\(n\)</span> får man med följande regler:</p>
<ul>
<li>Om <span class="math inline">\(n = 1\)</span> är vi klara.</li>
<li>Om <span class="math inline">\(n\)</span> är jämnt, fortsätt med
<span class="math inline">\(n/2\)</span>.</li>
<li>Annars, fortsätt med <span class="math inline">\(3n+1\)</span>.</li>
</ul>
<p>Collatz-sekvensen med start i <span
class="math inline">\(n=10\)</span> är: <span class="math inline">\(10,
5, 16, 8, 4, 2\)</span>. Om man startar med <span
class="math inline">\(n=9\)</span> får man en längre sekvens: <span
class="math inline">\(9, 28, 14, 7, 22, 11, 34, 17, 52, 26, 13, 40, 20,
10, 5, 16, 8, 4, 2\)</span>.</p>
<p>Skriv en rekursiv funktion <code>collatz(n)</code> returnerar en
lista med Collatz-sekvensen med start i <span
class="math inline">\(n\)</span>.</p>
<p>Exempel: </p>
<pre class="python"><code>&gt;&gt;&gt; collatz(10)</code></pre>
<pre class="python"><code>&gt;&gt;&gt; collatz(10)
[10, 5, 16, 8, 4, 2] </code></pre></li>
<li><p>Använd funktionen <code>foldr</code> för att skriva en funktion
<code>joinstrings</code> som konkatenerar en lista med
strängar.</p></li>
<li><p>Skriv <code>fac</code> och <code>fib</code> med hjälp av loopar
istället.</p></li>
<li><p>Vad blir fel om vi inte kopierar <code>xs</code> i
<code>quicksort</code>?</p></li>
<li><p> Pascals triangel ser ut så här:</p>
<pre class="python"><code>    1
   1 1
  1 2 1
 1 3 3 1
1 4 6 4 1</code></pre>
<p>osv… Skriv en funktion <code>pascal(n)</code> som returnerar den
<code>n</code>:e raden. Den ska fungera på följande sätt:</p>
<pre class="python"><code>for i in range(1,8):
   print(pascal(i))</code></pre>
<pre class="python"><code>[1]
[1, 1]
[1, 2, 1]
[1, 3, 3, 1]
[1, 4, 6, 4, 1]
[1, 5, 10, 10, 5, 1]
[1, 6, 15, 20, 15, 6, 1]</code></pre></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
